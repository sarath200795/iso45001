<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consultation & Participation</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = { theme: { extend: { colors: { 'slate-850': '#1e293b', 'slate-950': '#020617' } } } }
    </script>
    <style>
        body { background-color: #0f172a; color: #f8fafc; font-family: sans-serif; }
        .glass-panel { background: rgba(30, 41, 59, 0.4); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.05); transition: all 0.2s; }
        .glass-panel:hover { border-color: rgba(59, 130, 246, 0.4); transform: translateY(-2px); cursor: pointer; }
        input, select, textarea { background: #0f172a; border: 1px solid #334155; color: white; padding: 8px; border-radius: 6px; outline: none; width: 100%; transition: border-color 0.2s; }
        input:focus, select:focus, textarea:focus { border-color: #3b82f6; }
        input:disabled, select:disabled, textarea:disabled { opacity: 0.6; cursor: not-allowed; }
        .status-Open { color: #f87171; background: rgba(248, 113, 113, 0.1); }
        .status-InProgress { color: #facc15; background: rgba(250, 204, 21, 0.1); }
        .status-Closed { color: #34d399; background: rgba(52, 211, 153, 0.1); }

        @media print {
            @page { size: A4; margin: 15mm; }
            body { background: white; color: black; }
            .no-print, header { display: none !important; }
            .fixed.inset-0 { position: static !important; background: white !important; }
            .fixed.inset-0 > div { width: 100% !important; max-width: none !important; background: white !important; color: black !important; }
            h2, h3, p, span, div { color: black !important; }
            table { border-collapse: collapse; width: 100%; }
            th, td { border: 1px solid #000 !important; padding: 8px; color: black !important; }
            th { background-color: #f0f0f0 !important; }
            .doc-header { display: flex !important; }
            .bg-slate-800, .bg-slate-900 { background: white !important; }
        }
        .doc-header { display: none; }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <div id="root" class="h-full flex flex-col"></div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, get, push, update, set, remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = { apiKey: "AIzaSyAzfoxuzRbmyrhGChfTEWB05xvyNRmvK3k", authDomain: "ohsms-fa534.firebaseapp.com", databaseURL: "https://ohsms-fa534-default-rtdb.firebaseio.com/", projectId: "ohsms-fa534", storageBucket: "ohsms-fa534.appspot.com", messagingSenderId: "YOUR_SENDER_ID", appId: "YOUR_APP_ID" };
        const app = initializeApp(firebaseConfig);
        window.db = getDatabase(app);
        window.fb = { ref, get, push, update, set, remove };
    </script>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const MEETING_TYPES = ["Committee Meeting", "Incident Investigation", "Policy Decision", "Objective & Targets", "Legal Aspects", "Continual Improvement Plans", "Program Management"];

        // USER SELECT COMPONENT
        const UserSelect = ({ users, value, onChange, disabled, placeholder }) => (
            <select value={value} onChange={e => onChange(e.target.value)} disabled={disabled} className="w-full">
                <option value="">{placeholder || 'Select User...'}</option>
                {users.map(u => <option key={u.id} value={u.name}>{u.name} ({u.role})</option>)}
            </select>
        );

        // SITE SELECT COMPONENT
        const SiteSelect = ({ sites, value, onChange, disabled }) => (
            <select value={value} onChange={e => onChange(e.target.value)} disabled={disabled} className="w-full">
                <option value="">Select Site...</option>
                {sites.map(s => <option key={s.code} value={s.code}>{s.name} ({s.code})</option>)}
            </select>
        );

        // MEETING DETAIL MODAL
        const MeetingDetailModal = ({ meeting, onClose, onUpdateStatus, session, permissions, users }) => {
            if (!meeting) return null;

            const canEditStatus = (row) => {
                if (permissions.viewOnly && !permissions.canEditOwnedActions) return false;
                if (permissions.canEditOwnedActions) return row.owner === session.user;
                return !permissions.viewOnly;
            };

            const siteUsers = useMemo(() => {
                if (!meeting.siteId) return users;
                return users.filter(u => u.role === 'Owner' || (u.accessibleSites && u.accessibleSites.includes(meeting.siteId)) || u.assignedSite === meeting.siteId);
            }, [users, meeting.siteId]);

            return (
                <div className="fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto">
                    <div className="bg-slate-900 border border-slate-700 w-full max-w-5xl rounded-2xl flex flex-col shadow-2xl relative min-h-[50vh]">
                        <div className="doc-header p-6 border-b border-slate-700">
                            <div><h1 className="text-2xl font-bold uppercase">Minutes of Meeting</h1><p className="text-sm text-slate-400">Org: {session.orgId}</p></div>
                            <div className="text-right"><p className="text-xl font-mono font-bold">{meeting.id}</p><p className="text-sm text-slate-400">Date: {meeting.date}</p></div>
                        </div>

                        <div className="flex-1 overflow-y-auto p-6">
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 text-sm">
                                <div><span className="text-slate-500 text-xs uppercase block">Site</span><span className="font-bold text-emerald-400">{meeting.siteId}</span></div>
                                <div><span className="text-slate-500 text-xs uppercase block">Type</span><span className="font-bold">{meeting.interaction}</span></div>
                                <div><span className="text-slate-500 text-xs uppercase block">Category</span><span className="font-bold">{meeting.category}</span></div>
                                <div><span className="text-slate-500 text-xs uppercase block">Time</span><span className="font-bold">{meeting.time}</span></div>
                            </div>

                            <div className="mb-6 section-box bg-slate-800/50 p-4 rounded-xl border border-slate-700">
                                <h3 className="text-xs uppercase text-slate-500 font-bold mb-2">Agenda / Purpose</h3>
                                <p className="text-slate-300">{meeting.agenda || 'N/A'}</p>
                            </div>

                            <div className="mb-6 section-box bg-slate-800/50 p-4 rounded-xl border border-slate-700">
                                <h3 className="text-xs uppercase text-slate-500 font-bold mb-2">Attendees</h3>
                                <div className="flex flex-wrap gap-2">{(meeting.attendees || []).map((a, i) => <span key={i} className="bg-slate-700 px-3 py-1 rounded-full text-sm">{a}</span>)}</div>
                            </div>

                            <div className="section-box">
                                <h3 className="text-xs uppercase text-slate-500 font-bold mb-3">Action Items / Minutes</h3>
                                <div className="overflow-x-auto rounded-xl border border-slate-700">
                                    <table className="w-full text-sm">
                                        <thead className="bg-slate-800"><tr><th className="p-3 text-left text-slate-400">Discussion Point</th><th className="p-3 text-left text-slate-400">Action</th><th className="p-3 text-left text-slate-400">Owner</th><th className="p-3 text-left text-slate-400">Due</th><th className="p-3 text-left text-slate-400 no-print">Status</th></tr></thead>
                                        <tbody className="divide-y divide-slate-700">
                                            {(meeting.minutes || []).map((row, idx) => (
                                                <tr key={idx}>
                                                    <td className="p-3">{row.discussion}</td>
                                                    <td className="p-3">{row.action}</td>
                                                    <td className="p-3 text-blue-400">{row.owner}</td>
                                                    <td className="p-3">{row.due}</td>
                                                    <td className="p-3 no-print">
                                                        <select value={row.status || 'Open'} onChange={e => onUpdateStatus(meeting.firebaseKey, idx, e.target.value)} disabled={!canEditStatus(row)} className={`text-xs px-2 py-1 rounded status-${row.status || 'Open'}`}>
                                                            <option value="Open">Open</option>
                                                            <option value="InProgress">In Progress</option>
                                                            <option value="Closed">Closed</option>
                                                        </select>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div className="p-4 border-t border-slate-700 flex justify-end gap-3 no-print">
                            <button onClick={() => window.print()} className="bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg font-bold text-sm"><i className="fas fa-file-pdf mr-2"></i>Print PDF</button>
                            <button onClick={onClose} className="bg-slate-700 hover:bg-slate-600 text-white px-6 py-2 rounded-lg font-bold text-sm">Close</button>
                        </div>
                    </div>
                </div>
            );
        };

        // MEETING FORM
        const MeetingForm = ({ session, sites, users, siteId, permissions, prefill, onSave }) => {
            const [selectedSite, setSelectedSite] = useState(siteId === 'GLOBAL' ? '' : siteId);
            const [form, setForm] = useState({
                interaction: 'Consultation', category: prefill?.category || 'Committee Meeting',
                date: prefill?.date || new Date().toISOString().split('T')[0], time: prefill?.time || '',
                agenda: prefill?.agenda || '', attendees: [], minutes: []
            });
            const [newAttendee, setNewAttendee] = useState('');
            const [newMinute, setNewMinute] = useState({ discussion: '', action: '', owner: '', due: '', status: 'Open' });

            const siteUsers = useMemo(() => {
                if (!selectedSite) return users;
                return users.filter(u => u.role === 'Owner' || (u.accessibleSites && u.accessibleSites.includes(selectedSite)) || u.assignedSite === selectedSite);
            }, [users, selectedSite]);

            const canEdit = !permissions.viewOnly;

            const addAttendee = () => {
                if (newAttendee && !form.attendees.includes(newAttendee)) {
                    setForm({ ...form, attendees: [...form.attendees, newAttendee] });
                    setNewAttendee('');
                }
            };

            const addMinute = () => {
                if (newMinute.discussion) {
                    setForm({ ...form, minutes: [...form.minutes, { ...newMinute }] });
                    setNewMinute({ discussion: '', action: '', owner: '', due: '', status: 'Open' });
                }
            };

            const handleSubmit = () => {
                if (!selectedSite) { alert('Please select a site'); return; }
                if (!form.category || !form.date) { alert('Fill required fields'); return; }
                const meetingId = `MOM-${selectedSite}-${Date.now().toString().slice(-6)}`;
                onSave({ ...form, id: meetingId, siteId: selectedSite, createdBy: session.user, timestamp: Date.now() });
            };

            return (
                <div className="space-y-6 animate-fade-in">
                    {permissions.viewOnly && (
                        <div className="bg-yellow-500/10 border border-yellow-500/30 p-3 rounded-lg text-yellow-400 text-xs">
                            <i className="fas fa-eye mr-2"></i> View Only Mode - You cannot create or modify records
                        </div>
                    )}
                    <div className="glass-panel p-6 rounded-xl border border-slate-700">
                        <h2 className="text-xl font-bold text-white mb-4">New Meeting Record</h2>
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                            <div><label className="text-[10px] uppercase font-bold text-slate-500">Site</label><SiteSelect sites={sites} value={selectedSite} onChange={v => { setSelectedSite(v); setForm({...form, attendees: []}); }} disabled={!canEdit || siteId !== 'GLOBAL'} /></div>
                            <div><label className="text-[10px] uppercase font-bold text-slate-500">Interaction Type</label><select value={form.interaction} onChange={e => setForm({...form, interaction: e.target.value})} disabled={!canEdit}><option>Consultation</option><option>Participation</option></select></div>
                            <div><label className="text-[10px] uppercase font-bold text-slate-500">Category</label><select value={form.category} onChange={e => setForm({...form, category: e.target.value})} disabled={!canEdit}>{MEETING_TYPES.map(t => <option key={t}>{t}</option>)}</select></div>
                            <div><label className="text-[10px] uppercase font-bold text-slate-500">Date</label><input type="date" value={form.date} onChange={e => setForm({...form, date: e.target.value})} disabled={!canEdit} /></div>
                            <div><label className="text-[10px] uppercase font-bold text-slate-500">Time</label><input type="time" value={form.time} onChange={e => setForm({...form, time: e.target.value})} disabled={!canEdit} /></div>
                            <div className="col-span-3"><label className="text-[10px] uppercase font-bold text-slate-500">Agenda</label><input value={form.agenda} onChange={e => setForm({...form, agenda: e.target.value})} placeholder="Meeting purpose..." disabled={!canEdit} /></div>
                        </div>

                        <div className="mb-6">
                            <label className="text-[10px] uppercase font-bold text-slate-500 block mb-2">Attendees</label>
                            <div className="flex gap-2 mb-2">
                                <UserSelect users={siteUsers} value={newAttendee} onChange={setNewAttendee} disabled={!canEdit} placeholder="Select attendee..." />
                                {canEdit && <button onClick={addAttendee} className="bg-blue-600 hover:bg-blue-500 text-white px-4 rounded font-bold text-sm whitespace-nowrap">+ Add</button>}
                            </div>
                            <div className="flex flex-wrap gap-2">{form.attendees.map((a, i) => <span key={i} className="bg-slate-800 px-3 py-1 rounded-full text-sm flex items-center gap-2">{a}{canEdit && <button onClick={() => setForm({...form, attendees: form.attendees.filter((_, x) => x !== i)})} className="text-red-400 hover:text-red-300">×</button>}</span>)}</div>
                        </div>

                        <div className="mb-6">
                            <label className="text-[10px] uppercase font-bold text-slate-500 block mb-2">Minutes / Action Items</label>
                            {canEdit && (
                                <div className="grid grid-cols-5 gap-2 mb-3">
                                    <input placeholder="Discussion Point" value={newMinute.discussion} onChange={e => setNewMinute({...newMinute, discussion: e.target.value})} />
                                    <input placeholder="Action Required" value={newMinute.action} onChange={e => setNewMinute({...newMinute, action: e.target.value})} />
                                    <UserSelect users={siteUsers} value={newMinute.owner} onChange={v => setNewMinute({...newMinute, owner: v})} placeholder="Owner..." />
                                    <input type="date" value={newMinute.due} onChange={e => setNewMinute({...newMinute, due: e.target.value})} />
                                    <button onClick={addMinute} className="bg-emerald-600 hover:bg-emerald-500 text-white rounded font-bold text-sm">+ Add Row</button>
                                </div>
                            )}
                            {form.minutes.length > 0 && (
                                <div className="overflow-x-auto rounded-xl border border-slate-700">
                                    <table className="w-full text-sm">
                                        <thead className="bg-slate-800"><tr><th className="p-2 text-left text-slate-400">Discussion</th><th className="p-2 text-left text-slate-400">Action</th><th className="p-2 text-left text-slate-400">Owner</th><th className="p-2 text-left text-slate-400">Due</th><th className="p-2"></th></tr></thead>
                                        <tbody className="divide-y divide-slate-700">{form.minutes.map((m, i) => (<tr key={i}><td className="p-2">{m.discussion}</td><td className="p-2">{m.action}</td><td className="p-2 text-blue-400">{m.owner}</td><td className="p-2">{m.due}</td><td className="p-2">{canEdit && <button onClick={() => setForm({...form, minutes: form.minutes.filter((_, x) => x !== i)})} className="text-red-400">×</button>}</td></tr>))}</tbody>
                                    </table>
                                </div>
                            )}
                        </div>

                        {canEdit && <button onClick={handleSubmit} className="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-xl shadow-lg">Save Meeting Record</button>}
                    </div>
                </div>
            );
        };

        // REPOSITORY VIEW
        const MeetingRepository = ({ meetings, onView, onDelete, permissions }) => {
            const [filter, setFilter] = useState({ site: 'All', category: 'All' });

            const filtered = useMemo(() => {
                return meetings.filter(m => (filter.site === 'All' || m.siteId === filter.site) && (filter.category === 'All' || m.category === filter.category));
            }, [meetings, filter]);

            const exportToExcel = () => {
                const data = filtered.map(m => ({ ID: m.id, Site: m.siteId, Date: m.date, Type: m.interaction, Category: m.category, Attendees: (m.attendees || []).join(', '), Actions: (m.minutes || []).length }));
                const ws = XLSX.utils.json_to_sheet(data);
                const wb = XLSX.utils.book_new();
                XLSX.utils.book_append_sheet(wb, ws, "Meetings");
                XLSX.writeFile(wb, "Consultation_Records.xlsx");
            };

            return (
                <div className="space-y-6 animate-fade-in">
                    <div className="flex justify-between items-end mb-6">
                        <div className="flex gap-4">
                            <div><label className="text-[10px] uppercase font-bold text-slate-500 block mb-1">Site</label><select className="bg-slate-800 p-2 rounded w-32" value={filter.site} onChange={e => setFilter({...filter, site: e.target.value})}><option value="All">All Sites</option>{[...new Set(meetings.map(m => m.siteId))].map(s => <option key={s}>{s}</option>)}</select></div>
                            <div><label className="text-[10px] uppercase font-bold text-slate-500 block mb-1">Category</label><select className="bg-slate-800 p-2 rounded w-40" value={filter.category} onChange={e => setFilter({...filter, category: e.target.value})}><option value="All">All Categories</option>{MEETING_TYPES.map(t => <option key={t}>{t}</option>)}</select></div>
                        </div>
                        <button onClick={exportToExcel} className="bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2 rounded font-bold text-sm"><i className="fas fa-file-excel mr-2"></i>Export</button>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        {filtered.map(m => (
                            <div key={m.firebaseKey} className="glass-panel p-4 rounded-xl" onClick={() => onView(m)}>
                                <div className="flex justify-between items-start mb-2">
                                    <span className="font-mono text-xs text-emerald-400">{m.id}</span>
                                    <span className="text-[10px] bg-blue-500/20 text-blue-400 px-2 py-0.5 rounded">{m.interaction}</span>
                                </div>
                                <h3 className="font-bold text-white mb-1">{m.category}</h3>
                                <p className="text-xs text-slate-400 mb-2">{m.siteId} • {m.date}</p>
                                <div className="flex justify-between items-center">
                                    <span className="text-[10px] text-slate-500">{(m.attendees || []).length} attendees • {(m.minutes || []).length} actions</span>
                                    {!permissions.viewOnly && permissions.canDelete && <button onClick={e => { e.stopPropagation(); onDelete(m); }} className="text-red-400 hover:text-red-300 text-xs"><i className="fas fa-trash"></i></button>}
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // MAIN APP
        const App = () => {
            const [view, setView] = useState('form');
            const [session, setSession] = useState(null);
            const [meetings, setMeetings] = useState([]);
            const [selectedMeeting, setSelectedMeeting] = useState(null);
            const [siteId, setSiteId] = useState('GLOBAL');
            const [sites, setSites] = useState([]);
            const [users, setUsers] = useState([]);
            const [permissions, setPermissions] = useState({ viewOnly: false, canEditOwnedActions: false, canDelete: false });
            const [prefill, setPrefill] = useState(null);

            useEffect(() => {
                const s = sessionStorage.getItem('isoSession');
                if (!s) { window.location.href = 'index.html'; return; }
                const sess = JSON.parse(s);
                setSession(sess);

                const params = new URLSearchParams(window.location.search);
                const ctx = params.get('site');
                if (ctx && ctx !== 'GLOBAL') setSiteId(ctx);

                const viewOnly = params.get('viewOnly') === 'true';
                const role = params.get('role') || sess.role;

                setPermissions({
                    viewOnly: viewOnly || role === 'User',
                    canEditOwnedActions: role === 'Manager',
                    canDelete: role === 'Owner'
                });

                if (params.get('category')) {
                    setPrefill({ category: params.get('category'), date: params.get('date'), time: params.get('time'), agenda: params.get('agenda') });
                }

                const dbRef = window.fb.ref(window.db, `organizations/${sess.orgId}`);
                window.fb.get(dbRef).then(snap => {
                    if (snap.exists()) {
                        const data = snap.val();
                        if (data.meetings) setMeetings(Object.entries(data.meetings).map(([k, v]) => ({ firebaseKey: k, ...v })));
                        if (data.sites) {
                            const allSites = Object.values(data.sites);
                            if (sess.role === 'Owner') setSites(allSites);
                            else {
                                const accessible = sess.accessibleSites || (sess.assignedSite ? [sess.assignedSite] : []);
                                setSites(allSites.filter(s => accessible.includes(s.code)));
                            }
                        }
                        if (data.users) setUsers(Object.entries(data.users).map(([k, v]) => ({ id: k, ...v })).filter(u => u.status === 'Active'));
                    }
                });
            }, []);

            const handleSave = async (data) => {
                await window.fb.push(window.fb.ref(window.db, `organizations/${session.orgId}/meetings`), data);
                alert("Meeting saved!");
                window.location.reload();
            };

            const handleDelete = async (meeting) => {
                if (confirm("Delete this record?")) {
                    await window.fb.remove(window.fb.ref(window.db, `organizations/${session.orgId}/meetings/${meeting.firebaseKey}`));
                    alert("Deleted.");
                    window.location.reload();
                }
            };

            const handleStatusUpdate = async (firebaseKey, rowIdx, newStatus) => {
                const meeting = meetings.find(m => m.firebaseKey === firebaseKey);
                if (!meeting) return;
                const updatedMinutes = [...meeting.minutes];
                updatedMinutes[rowIdx].status = newStatus;
                await window.fb.update(window.fb.ref(window.db, `organizations/${session.orgId}/meetings/${firebaseKey}`), { minutes: updatedMinutes });
                setMeetings(meetings.map(m => m.firebaseKey === firebaseKey ? { ...m, minutes: updatedMinutes } : m));
                setSelectedMeeting({ ...selectedMeeting, minutes: updatedMinutes });
            };

            if (!session) return null;

            return (
                <div className="flex flex-col h-screen bg-slate-950 text-white">
                    <header className="h-16 border-b border-slate-800 bg-slate-900 flex items-center justify-between px-6 no-print">
                        <div className="flex items-center gap-4">
                            <a href="home.html" className="text-slate-400 hover:text-white"><i className="fas fa-arrow-left"></i> Back</a>
                            <h1 className="font-bold text-lg">Consultation & Participation</h1>
                            <span className="text-xs bg-blue-500/20 text-blue-400 px-2 py-1 rounded border border-blue-500/30">{session.role}</span>
                            {permissions.viewOnly && <span className="text-xs bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded border border-yellow-500/30">View Only</span>}
                        </div>
                        <div className="flex bg-slate-800 p-1 rounded-lg">
                            <button onClick={() => setView('form')} className={`px-4 py-1.5 rounded text-xs font-bold ${view === 'form' ? 'bg-blue-600 text-white' : 'text-slate-400'}`}>New Record</button>
                            <button onClick={() => setView('repo')} className={`px-4 py-1.5 rounded text-xs font-bold ${view === 'repo' ? 'bg-blue-600 text-white' : 'text-slate-400'}`}>Repository</button>
                        </div>
                    </header>

                    <main className="flex-1 overflow-y-auto p-6 max-w-7xl mx-auto w-full">
                        {view === 'form' && <MeetingForm session={session} sites={sites} users={users} siteId={siteId} permissions={permissions} prefill={prefill} onSave={handleSave} />}
                        {view === 'repo' && <MeetingRepository meetings={meetings} onView={setSelectedMeeting} onDelete={handleDelete} permissions={permissions} />}
                    </main>

                    {selectedMeeting && <MeetingDetailModal meeting={selectedMeeting} onClose={() => setSelectedMeeting(null)} onUpdateStatus={handleStatusUpdate} session={session} permissions={permissions} users={users} />}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
